{% extends 'base.html' %} {% load static %} {% block content %}
<!-- 
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasWithBackdrop" aria-labelledby="offcanvasWithBackdropLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasWithBackdropLabel">Segments</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <a href="#Segment1">
            <h2 id="seg1">
                </i>Segment 1</h2>
        </a>
        <br>
        <a href="#Segment2">
            <h2 id="seg2">Segment 2</h2>
        </a>
        <br>
        <a href="#Segment3">
            <h2 id="seg3">Segment 3</h2>
        </a>
        <br>
        <a href="#Segment4">
            <h2 id="seg4">Segment 4</h2>
        </a>
        <br>
        <a href="#Segment5">
            <h2 id="seg5">Segment 5</h2>
        </a>
    </div>

</div> -->
<!-- Main -->

<section id="All">
    <div class="card-header">
        <h1>Analytics:</h1>
    </div>
    <div id="myDiv">
    </div>
</section>

<section id="Segment1">
    <div class="card-sm-header">
        <h1>Segment 1:</h1>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-6">
                <div id='drawsegment_1'>
                </div>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-6">
                <div id='drawsegment_1.1'>
                </div>
            </div>

        </div>
    </div>


    <div class="offerbtn">
        <form action="segment_email" method='post'>
            {% csrf_token %}
            <input type="hidden" name="segment" value="segment1">
            <button type="submit" class="btn btn-primary btn-lg sub" style="background-color: rgb(42, 11, 71); border:1px solid rgb(42, 11, 71);margin-left:80%">Send Offer</button>
        </form>
    </div>
    <br>
</section>

<!-- <section id="Segment2" class="mt-5">

    <div class="card-sm-header card-lg-header ">
        <h1>Segment 2:</h1>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-6">
                <div id='drawsegment_2'>
                </div>
            </div>
            <div class="col-sm-12 col-md-12 col-lg-6">
                <div id='drawsegment_2.1'></div>
            </div>

        </div>
    </div>

    <div class="offerbtn">
        <form action="segment_email" method='post'>
            {% csrf_token %}
            <input type="hidden" name="segment" value="segment2">
            <button type="submit" value="segment 1" class="btn btn-primary btn-lg sub" style="background-color: rgb(42, 11, 71); border:1px solid rgb(42, 11, 71);margin-left:80%">Send Offer</button>
        </form>
    </div>
    <br>

    </div>
</section> -->


<!-- <section id="Segment3">
    <div class="card">
        <div class="card-header">
            <h1>Segment 3:</h1>
        </div>

        <div class="card-body">
            <div class="row">
                <div id='drawsegment_3' class="col-sm-12 col-md-12 col-lg-6">
                </div>
                <div id='drawsegment_3.1' class="col-sm-12 col-md-12 col-lg-6">
                </div>
            </div>
        </div>

        <div class="offerbtn">
            <form action="segment_email" method='post '>
                {% csrf_token %}
                <input type="hidden" name="segment" value="segment3">
                <button type="submit" value="segment 1" class="btn btn-primary btn-lg sub" style="background-color: rgb(42, 11, 71); border:1px solid rgb(42, 11, 71);;margin-left:80%">Send Offer</button>
            </form>
        </div>
        <br>

    </div>
</section> -->

<!-- <section id="Segment4">
    <div class="card">
        <div class="card-header">
            <h1>Segment 4:</h1>
        </div>

        <div class="card-body">
            <div class="row">
                <div id='drawsegment_4' class="col-sm-12 col-md-12 col-lg-6">

                </div>
                <div id='drawsegment_4.1' class="col-sm-12 col-md-12 col-lg-6">
                </div>
            </div>
        </div>

        <div class="offerbtn">
            <form action="segment_email" method='post '>
                {% csrf_token %}
                <input type="hidden" name="segment" value="segment4">
                <button type="submit" value="segment 1" class="btn btn-primary btn-lg sub" style="background-color: rgb(42, 11, 71); border:1px solid rgb(42, 11, 71);margin-left:80%">Send Offer</button>
            </form>
        </div>
        <br>

    </div>
</section> -->

<!-- <section id="Segment5">
    <div class="card">
        <div class="card-header">
            <h1>Segment 5:</h1>
        </div>

        <div class="card-body">
            <div class="row">
                <div id='drawsegment_5' class="col-sm-12 col-md-12 col-lg-6">

                </div>
                <div id='drawsegment_5.1' class="col-sm-12 col-md-12 col-lg-6">
                </div>
            </div>
        </div>

        <div class="offerbtn">
            <form action="segment_email" method='post '>
                {% csrf_token %}
                <input type="hidden" name="segment" value="segment5">
                <button type="submit" value="segment 1" class="btn btn-primary btn-lg sub" style="background-color: rgb(42, 11, 71); border:1px solid rgb(42, 11, 71);margin-left:80%">Send Offer</button>
            </form>
        </div>
        <br>

    </div>
</section> -->



<!-- <div class="offerbtn">
    <form action="segment_email" method='post '>
        {% csrf_token %}
        <input type="hidden" name="segment" value="segment5">
        <button type="submit" class="btn btn-primary btn-lg sub" style="background-color: rgb(42, 11, 71); border:1px solid rgb(42, 11, 71);;margin-left:80%">Send Offer</button>
    </form>
    <br>
</div> -->
</div>
</section>
<div style="visibility: hidden;">
    <p id="s_male">{{males}}</p>
    <p id="s_female">{{females}}</p>
    <p id="ageplus">{{ageplus}}</p>
    <p id="ageminus">{{ageminus}}</p>
</div>
</body>

<script>
    var males = document.getElementById("s_male").innerHTML;
    males = males.slice(1);
    males = males.slice(0, males.length - 1);
    let male = males.split(",");
    var females = document.getElementById("s_female").innerHTML;

    females = females.slice(1);
    females = females.slice(0, females.length - 1);
    let female = females.split(",");


    var age18minus = document.getElementById("ageminus").innerHTML;
    age18minus = age18minus.slice(1);
    age18minus = age18minus.slice(0, males.length - 1);
    let minus = age18minus.split(",");

    var age18plus = document.getElementById("ageplus").innerHTML;
    age18plus = age18plus.slice(1);
    age18plus = age18plus.slice(0, males.length - 1);
    let plus = age18plus.split(",");
    console.log(plus[0])

    var ultimateColors = [
        ['rgb(82, 30, 105) ', 'rgb(144, 78, 172); ', 'rgb(88, 71, 95) ', 'rgb(36, 55, 57) ', 'rgb(6, 4, 4) '],
        ['rgb(177, 127, 38) ', 'rgb(205, 152, 36) ', 'rgb(99, 79, 37) ', 'rgb(129, 180, 179) ', 'rgb(124, 103, 37) '],
        ['rgb(33, 75, 99) ', 'rgb(79, 129, 102) ', 'rgb(151, 179, 100) ', 'rgb(175, 49, 35) ', 'rgb(36, 73, 147) '],
        ['rgb(146, 123, 21) ', 'rgb(177, 180, 34) ', 'rgb(206, 206, 40) ', 'rgb(175, 51, 21) ', 'rgb(35, 36, 21) ']
    ];
    var trace1 = {
        x: ['seg1', 'seg2', 'seg3', 'seg4', 'seg5'],
        y: male,
        name: 'Males',
        marker: {
            color: 'rgb(144, 78, 172)'
        },
        type: 'bar',

    };
    var trace2 = {
        x: ['seg1', 'seg2', 'seg3', 'seg4', 'seg5'],
        y: female,
        name: 'Females',
        marker: {
            color: 'rgb(82, 30, 105)'
        },
        type: 'bar'
    };


    var data = [trace1, trace2]


    var layout = {
        barmode: 'group'
    };
    var config = {
        responsive: true
    }

    Plotly.newPlot('myDiv', data, layout, config);
</script>

<script src="/static/js/draw_segment1.js">
</script>
<!-- <script src="/static/js/draw_segment2.js">
</script> -->
<!-- <script src="/static/js/draw_segment3.js"> 
</script>
<script src="/static/js/draw_segment4.js">
</script>
<script src="/static/js/draw_segment5.js">
</script> -->{% endblock %}